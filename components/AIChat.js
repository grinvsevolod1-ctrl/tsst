
import {useState} from 'react'
export default function AIChat(){ const [msgs,setMsgs]=useState([]); const [v,setV]=useState(''); const [loading,setLoading]=useState(false)
  async function send(){ if(!v.trim()) return; setMsgs(m=>[...m,{role:'user',text:v}]); setV(''); setLoading(true); const r=await fetch('/api/ai',{method:'POST',headers:{'Content-Type':'application/json'},body: JSON.stringify({ prompt: v })}); const d=await r.json(); setMsgs(m=>[...m,{role:'assistant',text: d.result||d.error||'Нет ответа'}]); setLoading(false) }
  return (<div style={{position:'fixed', right:16, bottom:16, width:320}}><div className="card"><div className="text-sm font-semibold">AI Ассистент</div><div style={{maxHeight:200,overflow:'auto'}} className="mt-2">{msgs.map((m,i)=>(<div key={i} style={{textAlign:m.role==='user'?'right':'left'}} className="p-1"><div className="inline-block rounded p-2 bg-gray-100">{m.text}</div></div>))}</div><div className="mt-2 flex gap-2"><input value={v} onChange={e=>setV(e.target.value)} className="flex-1 border rounded p-2" placeholder="Как помочь?" /><button onClick={send} className="btn" disabled={loading}>{loading?'...':'OK'}</button></div></div></div>) }
