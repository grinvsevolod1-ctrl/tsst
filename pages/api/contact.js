
import axios from 'axios'; export default async function handler(req,res){ if (req.method!=='POST') return res.status(405).json({ error:'Only POST' }); const { name,email,message } = req.body; try{ if (process.env.BITRIX_WEBHOOK_URL) await axios.post(process.env.BITRIX_WEBHOOK_URL, { fields:{ TITLE: `Contact: ${name||email||'--'}`, COMMENT: message } }); if (process.env.TELEGRAM_BOT_TOKEN && process.env.TELEGRAM_CHAT_ID) await axios.post(`https://api.telegram.org/bot${process.env.TELEGRAM_BOT_TOKEN}/sendMessage`, { chat_id: process.env.TELEGRAM_CHAT_ID, text: `Contact from ${name||'--'}\n${email||'--'}\n${message}` }); res.json({ ok:true }) }catch(e){ console.error(e); res.status(500).json({ error: String(e) }) } }
