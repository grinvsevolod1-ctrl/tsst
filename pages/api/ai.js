
import OpenAI from 'openai'; const client = new OpenAI({ apiKey: process.env.OPENAI_API_KEY }); export default async function handler(req,res){ if (req.method!=='POST') return res.status(405).json({ error:'Only POST' }); const { prompt } = req.body; if (!prompt) return res.status(400).json({ error:'No prompt' }); try{ const completion = await client.responses.create({ model: 'gpt-4o-mini', input: prompt }); const text = completion.output?.[0]?.content?.[0]?.text ?? JSON.stringify(completion); res.json({ result: text }) }catch(e){ console.error(e); res.status(500).json({ error: String(e) }) } }
